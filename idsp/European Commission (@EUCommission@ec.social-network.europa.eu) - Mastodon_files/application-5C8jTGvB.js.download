const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["push_notifications-index-D1mgptUM.js","useSelectableClick-Dit0yjgN.js","index-BdTwX--g.js","client-wT6vtYO_.js","short_number-w3W5phxu.js","numbers-CGZQWBYL.js","message-UFwkQlnu.js","api-CO6HG6jO.js","index-DHr9lByg.js","initial_state-CaZA8Ule.js","ready-DpOgoWSg.js","index-DgPXgYyr.js","load_locale-ulnUx0pe.js","index-DizoKcfL.js"])))=>i.map(i=>d[i]);
var ft=Object.defineProperty;var gt=(t,f,e)=>f in t?ft(t,f,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[f]=e;var w=(t,f,e)=>gt(t,typeof f!="symbol"?f+"":f,e);import{i as Qe,a as me,l as vt}from"../load_locale-ulnUx0pe.js";import{j as r,c as yt,_ as we}from"../client-wT6vtYO_.js";import{g as _t,r as j,u as Ke,d as J,i as Je}from"../index-BdTwX--g.js";import{I as xt,S as bt,u as fe,a as R,f as Ct,A as ie,O as Ze,b as wt,r as St,c as jt,V as Et,d as Se,e as Tt,g as je,h as ge,i as Xe,j as Lt,k as kt,m as Nt,l as Mt,n as Ot,o as At,p as Rt,w as Pt,s as It,q as Ft,t as $t,v as Dt,x as Ht,y as Gt,z as Bt,B as qt,C as Ut,D as zt,E as Wt,F as Vt,G as Qt,H as Kt,J as Jt,K as Zt,L as F,M as Xt,N as Yt,P as er,Q as tr,R as rr,T as nr,U as or,W as sr}from"../useSelectableClick-Dit0yjgN.js";import{H as Ye}from"../Helmet-BPcSXOin.js";import{S as ar}from"../react-router-scroll-4.es-DKN7iUUR.js";import{c as ir}from"../streaming-CdLztlxo.js";import{v as cr,s as ur,d as ce,m as I,a as lr,b as dr,o as Z,i as H,t as hr,c as pr,e as Ee,r as mr}from"../initial_state-CaZA8Ule.js";import{M}from"../message-UFwkQlnu.js";import{c as ve}from"../index-DizoKcfL.js";import{i as fr}from"../index.es-14lO17Lj.js";import{I as gr}from"../onboarding-CkWM5P7d.js";import{B as et,A as vr,L as yr,M as _r}from"../modal_container-Bdwuv5vp.js";import{L as ye,S as ue,u as _e,P as X,a as xr,R as xe,w as br,b as A}from"../short_number-w3W5phxu.js";import{u as tt,a as Cr}from"../familiar_followers-BJx5ARc7.js";import{A as wr}from"../avatar_group-PUipFlog.js";import{F as Sr,a as jr}from"../counters-BJ0cOeaq.js";import{g as Er,D as rt,a as Tr,b as nt,L as le,B as ot,F as st,c as at,H as de,C as Lr,P as Te,N as it,d as ct,e as ut,G as kr,K as Nr,A as Mr,f as Or,T as Ar,h as Y,i as Rr,j as Le,k as Pr,l as Ir,m as Fr,n as $r,O as Dr,o as Hr,E as Gr,S as Br,p as ee,q as qr,r as Ur,s as zr,t as Wr,u as ke,R as Ne,v as Me,w as Vr,x as Qr,y as Kr,z as Jr,M as Zr,I as Xr}from"../content_warning-DBVqPs4d.js";import{F as Yr}from"../follow_button-CbyUfmYr.js";import{L as en}from"../loading_indicator-CrJ6a2Vu.js";import{u as te}from"../useTimeout-F7jeHEBA.js";import{F as tn}from"../media_modal-D0-IsWwV.js";import{S as rn}from"../close-BsPe8EbX.js";import{B as K}from"../bundle_column_error-BLKMI474.js";import{N as nn}from"../navigation_bar-B-rTRUlZ.js";import{s as on}from"../scroll-BygYx8ga.js";import{C as sn,u as an,a as cn}from"../column_header-DVX0hzGP.js";import{C as un}from"../column-B4vwzadM.js";import{A as ln}from"../index-C9gXSuwZ.js";import{S as dn}from"../server_hero_image-f_lM_h9_.js";import{S as $}from"../skeleton-D9NbTYr9.js";import{S as hn}from"../search-i1s3kQ_F.js";import{C as pn}from"../compose_form_container-CoCw3SpX.js";import{L as mn}from"../link_footer-BgCm9Y2D.js";import{C as fn}from"../index-DaVQ7rmG.js";import"../status-NX1L2MIt.js";import{I as gn}from"../intl_provider-jejr6p24.js";import{r as vn}from"../ready-DpOgoWSg.js";import{l as yn}from"../index-DgPXgYyr.js";import"../api-CO6HG6jO.js";import"../index-DHr9lByg.js";import"../interopRequireDefault-CdiRfGvq.js";import"../react-textarea-autosize.browser.esm-BstEnzvw.js";import"../use-isomorphic-layout-effect.browser.esm-D-sFEUJ5.js";import"../index-BeIX8FeB.js";import"../embedded_status-BX2gPmph.js";import"../embedded_status_content-CTmx_BJU.js";import"../gif-Tcog7Z2v.js";import"../numbers-CGZQWBYL.js";import"../index-DB4MFEMX.js";import"../chevron_left-CnYIoVsW.js";import"../use-gesture-react.esm-PiBFdzIE.js";import"../add-D8GR9P00.js";import"../home-fill-BjwEpYg3.js";import"../settings-CPmE9sBj.js";import"../notifications-CgwvcKEu.js";import"../notifications-lYn-LpJE.js";import"../hashtags-DlzQcrtL.js";import"../icon_with_badge-C8KIzYnt.js";import"../verified_badge-DaDPuYyO.js";import"../emoji_picker_dropdown_container-Cq1cu6F5.js";import"../dropdown_selector-CwW7jEfK.js";import"../info-HtHaDKcq.js";import"../fuzzysort-BUgAtj0X.js";import"../edit-Cyfwv5F_.js";import"../bookmarks-fill-DgzxJ_c4.js";import"../person_add-fill-D1U4oKl8.js";import"../person_add-Bq7Kcwwn.js";import"../trending_up-De1RKRI5.js";import"../logo-D6Accnpz.js";import"../useBreakpoint-lQ5WUdV4.js";import"../tag-fitE3XYd.js";import"../list_alt-yox9TcbF.js";import"../lists-DZmiGarF.js";import"../permissions-CJkLQvs0.js";import"../hashtag-BzW8t4Na.js";import"../index-DwQAxx91.js";import"../card-DH61Uiu0.js";import"../avatar_overlay-D9JJxNE-.js";import"../toString-Bsgmptud.js";import"../status_content-Cc2EICSY.js";import"../poll-BHEf1S1R.js";import"../visibility_icon-Cd-syL2b.js";var U={exports:{}},z={exports:{}},W={exports:{}},_n=W.exports,Oe;function be(){return Oe||(Oe=1,function(t,f){(function(e,n){t.exports=n()})(_n,function(){function e(a){return!isNaN(parseFloat(a))&&isFinite(a)}function n(a){return a.charAt(0).toUpperCase()+a.substring(1)}function d(a){return function(){return this[a]}}var l=["isConstructor","isEval","isNative","isToplevel"],g=["columnNumber","lineNumber"],y=["fileName","functionName","source"],m=["args"],v=["evalOrigin"],o=l.concat(g,y,m,v);function c(a){if(a)for(var _=0;_<o.length;_++)a[o[_]]!==void 0&&this["set"+n(o[_])](a[o[_]])}c.prototype={getArgs:function(){return this.args},setArgs:function(a){if(Object.prototype.toString.call(a)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=a},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(a){if(a instanceof c)this.evalOrigin=a;else if(a instanceof Object)this.evalOrigin=new c(a);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var a=this.getFileName()||"",_=this.getLineNumber()||"",b=this.getColumnNumber()||"",i=this.getFunctionName()||"";return this.getIsEval()?a?"[eval] ("+a+":"+_+":"+b+")":"[eval]:"+_+":"+b:i?i+" ("+a+":"+_+":"+b+")":a+":"+_+":"+b}},c.fromString=function(_){var b=_.indexOf("("),i=_.lastIndexOf(")"),h=_.substring(0,b),C=_.substring(b+1,i).split(","),x=_.substring(i+1);if(x.indexOf("@")===0)var E=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(x,""),k=E[1],L=E[2],N=E[3];return new c({functionName:h,args:C||void 0,fileName:k,lineNumber:L||void 0,columnNumber:N||void 0})};for(var s=0;s<l.length;s++)c.prototype["get"+n(l[s])]=d(l[s]),c.prototype["set"+n(l[s])]=function(a){return function(_){this[a]=!!_}}(l[s]);for(var u=0;u<g.length;u++)c.prototype["get"+n(g[u])]=d(g[u]),c.prototype["set"+n(g[u])]=function(a){return function(_){if(!e(_))throw new TypeError(a+" must be a Number");this[a]=Number(_)}}(g[u]);for(var p=0;p<y.length;p++)c.prototype["get"+n(y[p])]=d(y[p]),c.prototype["set"+n(y[p])]=function(a){return function(_){this[a]=String(_)}}(y[p]);return c})}(W)),W.exports}var xn=z.exports,Ae;function bn(){return Ae||(Ae=1,function(t,f){(function(e,n){t.exports=n(be())})(xn,function(n){var d=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,g=/^(eval@)?(\[native code])?$/;return{parse:function(m){if(typeof m.stacktrace<"u"||typeof m["opera#sourceloc"]<"u")return this.parseOpera(m);if(m.stack&&m.stack.match(l))return this.parseV8OrIE(m);if(m.stack)return this.parseFFOrSafari(m);throw new Error("Cannot parse given Error object")},extractLocation:function(m){if(m.indexOf(":")===-1)return[m];var v=/(.+?)(?::(\d+))?(?::(\d+))?$/,o=v.exec(m.replace(/[()]/g,""));return[o[1],o[2]||void 0,o[3]||void 0]},parseV8OrIE:function(m){var v=m.stack.split(`
`).filter(function(o){return!!o.match(l)},this);return v.map(function(o){o.indexOf("(eval ")>-1&&(o=o.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var c=o.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),s=c.match(/ (\(.+\)$)/);c=s?c.replace(s[0],""):c;var u=this.extractLocation(s?s[1]:c),p=s&&c||void 0,a=["eval","<anonymous>"].indexOf(u[0])>-1?void 0:u[0];return new n({functionName:p,fileName:a,lineNumber:u[1],columnNumber:u[2],source:o})},this)},parseFFOrSafari:function(m){var v=m.stack.split(`
`).filter(function(o){return!o.match(g)},this);return v.map(function(o){if(o.indexOf(" > eval")>-1&&(o=o.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),o.indexOf("@")===-1&&o.indexOf(":")===-1)return new n({functionName:o});var c=/((.*".+"[^@]*)?[^@]*)(?:@)/,s=o.match(c),u=s&&s[1]?s[1]:void 0,p=this.extractLocation(o.replace(c,""));return new n({functionName:u,fileName:p[0],lineNumber:p[1],columnNumber:p[2],source:o})},this)},parseOpera:function(m){return!m.stacktrace||m.message.indexOf(`
`)>-1&&m.message.split(`
`).length>m.stacktrace.split(`
`).length?this.parseOpera9(m):m.stack?this.parseOpera11(m):this.parseOpera10(m)},parseOpera9:function(m){for(var v=/Line (\d+).*script (?:in )?(\S+)/i,o=m.message.split(`
`),c=[],s=2,u=o.length;s<u;s+=2){var p=v.exec(o[s]);p&&c.push(new n({fileName:p[2],lineNumber:p[1],source:o[s]}))}return c},parseOpera10:function(m){for(var v=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,o=m.stacktrace.split(`
`),c=[],s=0,u=o.length;s<u;s+=2){var p=v.exec(o[s]);p&&c.push(new n({functionName:p[3]||void 0,fileName:p[2],lineNumber:p[1],source:o[s]}))}return c},parseOpera11:function(m){var v=m.stack.split(`
`).filter(function(o){return!!o.match(d)&&!o.match(/^Error created at/)},this);return v.map(function(o){var c=o.split("@"),s=this.extractLocation(c.pop()),u=c.shift()||"",p=u.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,a;u.match(/\(([^)]*)\)/)&&(a=u.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var _=a===void 0||a==="[arguments not available]"?void 0:a.split(",");return new n({functionName:p,args:_,fileName:s[0],lineNumber:s[1],columnNumber:s[2],source:o})},this)}}})}(z)),z.exports}var V={exports:{}},Cn=V.exports,Re;function wn(){return Re||(Re=1,function(t,f){(function(e,n){t.exports=n(be())})(Cn,function(e){return{backtrace:function(d){var l=[],g=10;typeof d=="object"&&typeof d.maxStackSize=="number"&&(g=d.maxStackSize);for(var y=arguments.callee;y&&l.length<g&&y.arguments;){for(var m=new Array(y.arguments.length),v=0;v<m.length;++v)m[v]=y.arguments[v];/function(?:\s+([\w$]+))+\s*\(/.test(y.toString())?l.push(new e({functionName:RegExp.$1||void 0,args:m})):l.push(new e({args:m}));try{y=y.caller}catch{break}}return l}}})}(V)),V.exports}var Q={exports:{}},D={},re={},Pe;function lt(){return Pe||(Pe=1,function(t){function f(i,h,C){if(h in i)return i[h];if(arguments.length===3)return C;throw new Error('"'+h+'" is a required argument.')}t.getArg=f;var e=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,n=/^data:.+\,.+$/;function d(i){var h=i.match(e);return h?{scheme:h[1],auth:h[2],host:h[3],port:h[4],path:h[5]}:null}t.urlParse=d;function l(i){var h="";return i.scheme&&(h+=i.scheme+":"),h+="//",i.auth&&(h+=i.auth+"@"),i.host&&(h+=i.host),i.port&&(h+=":"+i.port),i.path&&(h+=i.path),h}t.urlGenerate=l;function g(i){var h=i,C=d(i);if(C){if(!C.path)return i;h=C.path}for(var x=t.isAbsolute(h),E=h.split(/\/+/),k,L=0,N=E.length-1;N>=0;N--)k=E[N],k==="."?E.splice(N,1):k===".."?L++:L>0&&(k===""?(E.splice(N+1,L),L=0):(E.splice(N,2),L--));return h=E.join("/"),h===""&&(h=x?"/":"."),C?(C.path=h,l(C)):h}t.normalize=g;function y(i,h){i===""&&(i="."),h===""&&(h=".");var C=d(h),x=d(i);if(x&&(i=x.path||"/"),C&&!C.scheme)return x&&(C.scheme=x.scheme),l(C);if(C||h.match(n))return h;if(x&&!x.host&&!x.path)return x.host=h,l(x);var E=h.charAt(0)==="/"?h:g(i.replace(/\/+$/,"")+"/"+h);return x?(x.path=E,l(x)):E}t.join=y,t.isAbsolute=function(i){return i.charAt(0)==="/"||!!i.match(e)};function m(i,h){i===""&&(i="."),i=i.replace(/\/$/,"");for(var C=0;h.indexOf(i+"/")!==0;){var x=i.lastIndexOf("/");if(x<0||(i=i.slice(0,x),i.match(/^([^\/]+:\/)?\/*$/)))return h;++C}return Array(C+1).join("../")+h.substr(i.length+1)}t.relative=m;var v=function(){var i=Object.create(null);return!("__proto__"in i)}();function o(i){return i}function c(i){return u(i)?"$"+i:i}t.toSetString=v?o:c;function s(i){return u(i)?i.slice(1):i}t.fromSetString=v?o:s;function u(i){if(!i)return!1;var h=i.length;if(h<9||i.charCodeAt(h-1)!==95||i.charCodeAt(h-2)!==95||i.charCodeAt(h-3)!==111||i.charCodeAt(h-4)!==116||i.charCodeAt(h-5)!==111||i.charCodeAt(h-6)!==114||i.charCodeAt(h-7)!==112||i.charCodeAt(h-8)!==95||i.charCodeAt(h-9)!==95)return!1;for(var C=h-10;C>=0;C--)if(i.charCodeAt(C)!==36)return!1;return!0}function p(i,h,C){var x=i.source-h.source;return x!==0||(x=i.originalLine-h.originalLine,x!==0)||(x=i.originalColumn-h.originalColumn,x!==0||C)||(x=i.generatedColumn-h.generatedColumn,x!==0)||(x=i.generatedLine-h.generatedLine,x!==0)?x:i.name-h.name}t.compareByOriginalPositions=p;function a(i,h,C){var x=i.generatedLine-h.generatedLine;return x!==0||(x=i.generatedColumn-h.generatedColumn,x!==0||C)||(x=i.source-h.source,x!==0)||(x=i.originalLine-h.originalLine,x!==0)||(x=i.originalColumn-h.originalColumn,x!==0)?x:i.name-h.name}t.compareByGeneratedPositionsDeflated=a;function _(i,h){return i===h?0:i>h?1:-1}function b(i,h){var C=i.generatedLine-h.generatedLine;return C!==0||(C=i.generatedColumn-h.generatedColumn,C!==0)||(C=_(i.source,h.source),C!==0)||(C=i.originalLine-h.originalLine,C!==0)||(C=i.originalColumn-h.originalColumn,C!==0)?C:_(i.name,h.name)}t.compareByGeneratedPositionsInflated=b}(re)),re}var ne={},Ie;function Sn(){return Ie||(Ie=1,function(t){t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2;function f(e,n,d,l,g,y){var m=Math.floor((n-e)/2)+e,v=g(d,l[m],!0);return v===0?m:v>0?n-m>1?f(m,n,d,l,g,y):y==t.LEAST_UPPER_BOUND?n<l.length?n:-1:m:m-e>1?f(e,m,d,l,g,y):y==t.LEAST_UPPER_BOUND?m:e<0?-1:e}t.search=function(n,d,l,g){if(d.length===0)return-1;var y=f(-1,d.length,n,d,l,g||t.GREATEST_LOWER_BOUND);if(y<0)return-1;for(;y-1>=0&&l(d[y],d[y-1],!0)===0;)--y;return y}}(ne)),ne}var oe={},Fe;function jn(){if(Fe)return oe;Fe=1;var t=lt(),f=Object.prototype.hasOwnProperty;function e(){this._array=[],this._set=Object.create(null)}return e.fromArray=function(d,l){for(var g=new e,y=0,m=d.length;y<m;y++)g.add(d[y],l);return g},e.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},e.prototype.add=function(d,l){var g=t.toSetString(d),y=f.call(this._set,g),m=this._array.length;(!y||l)&&this._array.push(d),y||(this._set[g]=m)},e.prototype.has=function(d){var l=t.toSetString(d);return f.call(this._set,l)},e.prototype.indexOf=function(d){var l=t.toSetString(d);if(f.call(this._set,l))return this._set[l];throw new Error('"'+d+'" is not in the set.')},e.prototype.at=function(d){if(d>=0&&d<this._array.length)return this._array[d];throw new Error("No element indexed by "+d)},e.prototype.toArray=function(){return this._array.slice()},oe.ArraySet=e,oe}var G={},B={},$e;function En(){if($e)return B;$e=1;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return B.encode=function(f){if(0<=f&&f<t.length)return t[f];throw new TypeError("Must be between 0 and 63: "+f)},B.decode=function(f){var e=65,n=90,d=97,l=122,g=48,y=57,m=43,v=47,o=26,c=52;return e<=f&&f<=n?f-e:d<=f&&f<=l?f-d+o:g<=f&&f<=y?f-g+c:f==m?62:f==v?63:-1},B}var De;function Tn(){if(De)return G;De=1;var t=En(),f=5,e=1<<f,n=e-1,d=e;function l(y){return y<0?(-y<<1)+1:(y<<1)+0}function g(y){var m=(y&1)===1,v=y>>1;return m?-v:v}return G.encode=function(m){var v="",o,c=l(m);do o=c&n,c>>>=f,c>0&&(o|=d),v+=t.encode(o);while(c>0);return v},G.decode=function(m,v,o){var c=m.length,s=0,u=0,p,a;do{if(v>=c)throw new Error("Expected more digits in base 64 VLQ value.");if(a=t.decode(m.charCodeAt(v++)),a===-1)throw new Error("Invalid base64 digit: "+m.charAt(v-1));p=!!(a&d),a&=n,s=s+(a<<u),u+=f}while(p);o.value=g(s),o.rest=v},G}var se={},He;function Ln(){if(He)return se;He=1;function t(n,d,l){var g=n[d];n[d]=n[l],n[l]=g}function f(n,d){return Math.round(n+Math.random()*(d-n))}function e(n,d,l,g){if(l<g){var y=f(l,g),m=l-1;t(n,y,g);for(var v=n[g],o=l;o<g;o++)d(n[o],v)<=0&&(m+=1,t(n,m,o));t(n,m+1,o);var c=m+1;e(n,d,l,c-1),e(n,d,c+1,g)}}return se.quickSort=function(n,d){e(n,d,0,n.length-1)},se}var Ge;function kn(){if(Ge)return D;Ge=1;var t=lt(),f=Sn(),e=jn().ArraySet,n=Tn(),d=Ln().quickSort;function l(v){var o=v;return typeof v=="string"&&(o=JSON.parse(v.replace(/^\)\]\}'/,""))),o.sections!=null?new m(o):new g(o)}l.fromSourceMap=function(v){return g.fromSourceMap(v)},l.prototype._version=3,l.prototype.__generatedMappings=null,Object.defineProperty(l.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),l.prototype.__originalMappings=null,Object.defineProperty(l.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),l.prototype._charIsMappingSeparator=function(o,c){var s=o.charAt(c);return s===";"||s===","},l.prototype._parseMappings=function(o,c){throw new Error("Subclasses must implement _parseMappings")},l.GENERATED_ORDER=1,l.ORIGINAL_ORDER=2,l.GREATEST_LOWER_BOUND=1,l.LEAST_UPPER_BOUND=2,l.prototype.eachMapping=function(o,c,s){var u=c||null,p=s||l.GENERATED_ORDER,a;switch(p){case l.GENERATED_ORDER:a=this._generatedMappings;break;case l.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var _=this.sourceRoot;a.map(function(b){var i=b.source===null?null:this._sources.at(b.source);return i!=null&&_!=null&&(i=t.join(_,i)),{source:i,generatedLine:b.generatedLine,generatedColumn:b.generatedColumn,originalLine:b.originalLine,originalColumn:b.originalColumn,name:b.name===null?null:this._names.at(b.name)}},this).forEach(o,u)},l.prototype.allGeneratedPositionsFor=function(o){var c=t.getArg(o,"line"),s={source:t.getArg(o,"source"),originalLine:c,originalColumn:t.getArg(o,"column",0)};if(this.sourceRoot!=null&&(s.source=t.relative(this.sourceRoot,s.source)),!this._sources.has(s.source))return[];s.source=this._sources.indexOf(s.source);var u=[],p=this._findMapping(s,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,f.LEAST_UPPER_BOUND);if(p>=0){var a=this._originalMappings[p];if(o.column===void 0)for(var _=a.originalLine;a&&a.originalLine===_;)u.push({line:t.getArg(a,"generatedLine",null),column:t.getArg(a,"generatedColumn",null),lastColumn:t.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++p];else for(var b=a.originalColumn;a&&a.originalLine===c&&a.originalColumn==b;)u.push({line:t.getArg(a,"generatedLine",null),column:t.getArg(a,"generatedColumn",null),lastColumn:t.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++p]}return u},D.SourceMapConsumer=l;function g(v){var o=v;typeof v=="string"&&(o=JSON.parse(v.replace(/^\)\]\}'/,"")));var c=t.getArg(o,"version"),s=t.getArg(o,"sources"),u=t.getArg(o,"names",[]),p=t.getArg(o,"sourceRoot",null),a=t.getArg(o,"sourcesContent",null),_=t.getArg(o,"mappings"),b=t.getArg(o,"file",null);if(c!=this._version)throw new Error("Unsupported version: "+c);s=s.map(String).map(t.normalize).map(function(i){return p&&t.isAbsolute(p)&&t.isAbsolute(i)?t.relative(p,i):i}),this._names=e.fromArray(u.map(String),!0),this._sources=e.fromArray(s,!0),this.sourceRoot=p,this.sourcesContent=a,this._mappings=_,this.file=b}g.prototype=Object.create(l.prototype),g.prototype.consumer=l,g.fromSourceMap=function(o){var c=Object.create(g.prototype),s=c._names=e.fromArray(o._names.toArray(),!0),u=c._sources=e.fromArray(o._sources.toArray(),!0);c.sourceRoot=o._sourceRoot,c.sourcesContent=o._generateSourcesContent(c._sources.toArray(),c.sourceRoot),c.file=o._file;for(var p=o._mappings.toArray().slice(),a=c.__generatedMappings=[],_=c.__originalMappings=[],b=0,i=p.length;b<i;b++){var h=p[b],C=new y;C.generatedLine=h.generatedLine,C.generatedColumn=h.generatedColumn,h.source&&(C.source=u.indexOf(h.source),C.originalLine=h.originalLine,C.originalColumn=h.originalColumn,h.name&&(C.name=s.indexOf(h.name)),_.push(C)),a.push(C)}return d(c.__originalMappings,t.compareByOriginalPositions),c},g.prototype._version=3,Object.defineProperty(g.prototype,"sources",{get:function(){return this._sources.toArray().map(function(v){return this.sourceRoot!=null?t.join(this.sourceRoot,v):v},this)}});function y(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}g.prototype._parseMappings=function(o,c){for(var s=1,u=0,p=0,a=0,_=0,b=0,i=o.length,h=0,C={},x={},E=[],k=[],L,N,T,P,Ce;h<i;)if(o.charAt(h)===";")s++,h++,u=0;else if(o.charAt(h)===",")h++;else{for(L=new y,L.generatedLine=s,P=h;P<i&&!this._charIsMappingSeparator(o,P);P++);if(N=o.slice(h,P),T=C[N],T)h+=N.length;else{for(T=[];h<P;)n.decode(o,h,x),Ce=x.value,h=x.rest,T.push(Ce);if(T.length===2)throw new Error("Found a source, but no line and column");if(T.length===3)throw new Error("Found a source and line, but no column");C[N]=T}L.generatedColumn=u+T[0],u=L.generatedColumn,T.length>1&&(L.source=_+T[1],_+=T[1],L.originalLine=p+T[2],p=L.originalLine,L.originalLine+=1,L.originalColumn=a+T[3],a=L.originalColumn,T.length>4&&(L.name=b+T[4],b+=T[4])),k.push(L),typeof L.originalLine=="number"&&E.push(L)}d(k,t.compareByGeneratedPositionsDeflated),this.__generatedMappings=k,d(E,t.compareByOriginalPositions),this.__originalMappings=E},g.prototype._findMapping=function(o,c,s,u,p,a){if(o[s]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+o[s]);if(o[u]<0)throw new TypeError("Column must be greater than or equal to 0, got "+o[u]);return f.search(o,c,p,a)},g.prototype.computeColumnSpans=function(){for(var o=0;o<this._generatedMappings.length;++o){var c=this._generatedMappings[o];if(o+1<this._generatedMappings.length){var s=this._generatedMappings[o+1];if(c.generatedLine===s.generatedLine){c.lastGeneratedColumn=s.generatedColumn-1;continue}}c.lastGeneratedColumn=1/0}},g.prototype.originalPositionFor=function(o){var c={generatedLine:t.getArg(o,"line"),generatedColumn:t.getArg(o,"column")},s=this._findMapping(c,this._generatedMappings,"generatedLine","generatedColumn",t.compareByGeneratedPositionsDeflated,t.getArg(o,"bias",l.GREATEST_LOWER_BOUND));if(s>=0){var u=this._generatedMappings[s];if(u.generatedLine===c.generatedLine){var p=t.getArg(u,"source",null);p!==null&&(p=this._sources.at(p),this.sourceRoot!=null&&(p=t.join(this.sourceRoot,p)));var a=t.getArg(u,"name",null);return a!==null&&(a=this._names.at(a)),{source:p,line:t.getArg(u,"originalLine",null),column:t.getArg(u,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},g.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(o){return o==null}):!1},g.prototype.sourceContentFor=function(o,c){if(!this.sourcesContent)return null;if(this.sourceRoot!=null&&(o=t.relative(this.sourceRoot,o)),this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];var s;if(this.sourceRoot!=null&&(s=t.urlParse(this.sourceRoot))){var u=o.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(u))return this.sourcesContent[this._sources.indexOf(u)];if((!s.path||s.path=="/")&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(c)return null;throw new Error('"'+o+'" is not in the SourceMap.')},g.prototype.generatedPositionFor=function(o){var c=t.getArg(o,"source");if(this.sourceRoot!=null&&(c=t.relative(this.sourceRoot,c)),!this._sources.has(c))return{line:null,column:null,lastColumn:null};c=this._sources.indexOf(c);var s={source:c,originalLine:t.getArg(o,"line"),originalColumn:t.getArg(o,"column")},u=this._findMapping(s,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,t.getArg(o,"bias",l.GREATEST_LOWER_BOUND));if(u>=0){var p=this._originalMappings[u];if(p.source===s.source)return{line:t.getArg(p,"generatedLine",null),column:t.getArg(p,"generatedColumn",null),lastColumn:t.getArg(p,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},D.BasicSourceMapConsumer=g;function m(v){var o=v;typeof v=="string"&&(o=JSON.parse(v.replace(/^\)\]\}'/,"")));var c=t.getArg(o,"version"),s=t.getArg(o,"sections");if(c!=this._version)throw new Error("Unsupported version: "+c);this._sources=new e,this._names=new e;var u={line:-1,column:0};this._sections=s.map(function(p){if(p.url)throw new Error("Support for url field in sections not implemented.");var a=t.getArg(p,"offset"),_=t.getArg(a,"line"),b=t.getArg(a,"column");if(_<u.line||_===u.line&&b<u.column)throw new Error("Section offsets must be ordered and non-overlapping.");return u=a,{generatedOffset:{generatedLine:_+1,generatedColumn:b+1},consumer:new l(t.getArg(p,"map"))}})}return m.prototype=Object.create(l.prototype),m.prototype.constructor=l,m.prototype._version=3,Object.defineProperty(m.prototype,"sources",{get:function(){for(var v=[],o=0;o<this._sections.length;o++)for(var c=0;c<this._sections[o].consumer.sources.length;c++)v.push(this._sections[o].consumer.sources[c]);return v}}),m.prototype.originalPositionFor=function(o){var c={generatedLine:t.getArg(o,"line"),generatedColumn:t.getArg(o,"column")},s=f.search(c,this._sections,function(p,a){var _=p.generatedLine-a.generatedOffset.generatedLine;return _||p.generatedColumn-a.generatedOffset.generatedColumn}),u=this._sections[s];return u?u.consumer.originalPositionFor({line:c.generatedLine-(u.generatedOffset.generatedLine-1),column:c.generatedColumn-(u.generatedOffset.generatedLine===c.generatedLine?u.generatedOffset.generatedColumn-1:0),bias:o.bias}):{source:null,line:null,column:null,name:null}},m.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(o){return o.consumer.hasContentsOfAllSources()})},m.prototype.sourceContentFor=function(o,c){for(var s=0;s<this._sections.length;s++){var u=this._sections[s],p=u.consumer.sourceContentFor(o,!0);if(p)return p}if(c)return null;throw new Error('"'+o+'" is not in the SourceMap.')},m.prototype.generatedPositionFor=function(o){for(var c=0;c<this._sections.length;c++){var s=this._sections[c];if(s.consumer.sources.indexOf(t.getArg(o,"source"))!==-1){var u=s.consumer.generatedPositionFor(o);if(u){var p={line:u.line+(s.generatedOffset.generatedLine-1),column:u.column+(s.generatedOffset.generatedLine===u.line?s.generatedOffset.generatedColumn-1:0)};return p}}}return{line:null,column:null}},m.prototype._parseMappings=function(o,c){this.__generatedMappings=[],this.__originalMappings=[];for(var s=0;s<this._sections.length;s++)for(var u=this._sections[s],p=u.consumer._generatedMappings,a=0;a<p.length;a++){var _=p[a],b=u.consumer._sources.at(_.source);u.consumer.sourceRoot!==null&&(b=t.join(u.consumer.sourceRoot,b)),this._sources.add(b),b=this._sources.indexOf(b);var i=u.consumer._names.at(_.name);this._names.add(i),i=this._names.indexOf(i);var h={source:b,generatedLine:_.generatedLine+(u.generatedOffset.generatedLine-1),generatedColumn:_.generatedColumn+(u.generatedOffset.generatedLine===_.generatedLine?u.generatedOffset.generatedColumn-1:0),originalLine:_.originalLine,originalColumn:_.originalColumn,name:i};this.__generatedMappings.push(h),typeof h.originalLine=="number"&&this.__originalMappings.push(h)}d(this.__generatedMappings,t.compareByGeneratedPositionsDeflated),d(this.__originalMappings,t.compareByOriginalPositions)},D.IndexedSourceMapConsumer=m,D}var Nn=Q.exports,Be;function Mn(){return Be||(Be=1,function(t,f){(function(e,n){t.exports=n(kn(),be())})(Nn,function(e,n){function d(s){return new Promise(function(u,p){var a=new XMLHttpRequest;a.open("get",s),a.onerror=p,a.onreadystatechange=function(){a.readyState===4&&(a.status>=200&&a.status<300||s.substr(0,7)==="file://"&&a.responseText?u(a.responseText):p(new Error("HTTP status: "+a.status+" retrieving "+s)))},a.send()})}function l(s){if(typeof window<"u"&&window.atob)return window.atob(s);throw new Error("You must supply a polyfill for window.atob in this environment")}function g(s){if(typeof JSON<"u"&&JSON.parse)return JSON.parse(s);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function y(s,u){for(var p=[/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,/function\s+([^('"`]*?)\s*\(([^)]*)\)/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,/\b(?!(?:if|for|switch|while|with|catch)\b)(?:(?:static)\s+)?(\S+)\s*\(.*?\)\s*\{/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*\(.*?\)\s*=>/],a=s.split(`
`),_="",b=Math.min(u,20),i=0;i<b;++i){var h=a[u-i-1],C=h.indexOf("//");if(C>=0&&(h=h.substr(0,C)),h){_=h+_;for(var x=p.length,E=0;E<x;E++){var k=p[E].exec(_);if(k&&k[1])return k[1]}}}}function m(){if(typeof Object.defineProperty!="function"||typeof Object.create!="function")throw new Error("Unable to consume source maps in older browsers")}function v(s){if(typeof s!="object")throw new TypeError("Given StackFrame is not an object");if(typeof s.fileName!="string")throw new TypeError("Given file name is not a String");if(typeof s.lineNumber!="number"||s.lineNumber%1!==0||s.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if(typeof s.columnNumber!="number"||s.columnNumber%1!==0||s.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function o(s){for(var u=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/mg,p,a;a=u.exec(s);)p=a[1];if(p)return p;throw new Error("sourceMappingURL not found")}function c(s,u,p){return new Promise(function(a,_){var b=u.originalPositionFor({line:s.lineNumber,column:s.columnNumber});if(b.source){var i=u.sourceContentFor(b.source);i&&(p[b.source]=i),a(new n({functionName:b.name||s.functionName,args:s.args,fileName:b.source,lineNumber:b.line,columnNumber:b.column}))}else _(new Error("Could not get original source for given stackframe and source map"))})}return function s(u){if(!(this instanceof s))return new s(u);u=u||{},this.sourceCache=u.sourceCache||{},this.sourceMapConsumerCache=u.sourceMapConsumerCache||{},this.ajax=u.ajax||d,this._atob=u.atob||l,this._get=function(a){return new Promise((function(_,b){var i=a.substr(0,5)==="data:";if(this.sourceCache[a])_(this.sourceCache[a]);else if(u.offline&&!i)b(new Error("Cannot make network requests in offline mode"));else if(i){var h=/^data:application\/json;([\w=:"-]+;)*base64,/,C=a.match(h);if(C){var x=C[0].length,E=a.substr(x),k=this._atob(E);this.sourceCache[a]=k,_(k)}else b(new Error("The encoding of the inline sourcemap is not supported"))}else{var L=this.ajax(a,{method:"get"});this.sourceCache[a]=L,L.then(_,b)}}).bind(this))},this._getSourceMapConsumer=function(a,_){return new Promise((function(b){if(this.sourceMapConsumerCache[a])b(this.sourceMapConsumerCache[a]);else{var i=new Promise((function(h,C){return this._get(a).then(function(x){typeof x=="string"&&(x=g(x.replace(/^\)\]\}'/,""))),typeof x.sourceRoot>"u"&&(x.sourceRoot=_),h(new e.SourceMapConsumer(x))}).catch(C)}).bind(this));this.sourceMapConsumerCache[a]=i,b(i)}}).bind(this))},this.pinpoint=function(a){return new Promise((function(_,b){this.getMappedLocation(a).then((function(i){function h(){_(i)}this.findFunctionName(i).then(_,h).catch(h)}).bind(this),b)}).bind(this))},this.findFunctionName=function(a){return new Promise((function(_,b){v(a),this._get(a.fileName).then(function(h){var C=a.lineNumber,x=a.columnNumber,E=y(h,C);_(E?new n({functionName:E,args:a.args,fileName:a.fileName,lineNumber:C,columnNumber:x}):a)},b).catch(b)}).bind(this))},this.getMappedLocation=function(a){return new Promise((function(_,b){m(),v(a);var i=this.sourceCache,h=a.fileName;this._get(h).then((function(C){var x=o(C),E=x.substr(0,5)==="data:",k=h.substring(0,h.lastIndexOf("/")+1);return x[0]!=="/"&&!E&&!/^https?:\/\/|^\/\//i.test(x)&&(x=k+x),this._getSourceMapConsumer(x,k).then(function(L){return c(a,L,i).then(_).catch(function(){_(a)})})}).bind(this),b).catch(b)}).bind(this))}}})}(Q)),Q.exports}var On=U.exports,qe;function An(){return qe||(qe=1,function(t,f){(function(e,n){t.exports=n(bn(),wn(),Mn())})(On,function(n,d,l){var g={filter:function(c){return(c.functionName||"").indexOf("StackTrace$$")===-1&&(c.functionName||"").indexOf("ErrorStackParser$$")===-1&&(c.functionName||"").indexOf("StackTraceGPS$$")===-1&&(c.functionName||"").indexOf("StackGenerator$$")===-1},sourceCache:{}},y=function(){try{throw new Error}catch(s){return s}};function m(c,s){var u={};return[c,s].forEach(function(p){for(var a in p)Object.prototype.hasOwnProperty.call(p,a)&&(u[a]=p[a]);return u}),u}function v(c){return c.stack||c["opera#sourceloc"]}function o(c,s){return typeof s=="function"?c.filter(s):c}return{get:function(s){var u=y();return v(u)?this.fromError(u,s):this.generateArtificially(s)},getSync:function(s){s=m(g,s);var u=y(),p=v(u)?n.parse(u):d.backtrace(s);return o(p,s.filter)},fromError:function(s,u){u=m(g,u);var p=new l(u);return new Promise((function(a){var _=o(n.parse(s),u.filter);a(Promise.all(_.map(function(b){return new Promise(function(i){function h(){i(b)}p.pinpoint(b).then(i,h).catch(h)})})))}).bind(this))},generateArtificially:function(s){s=m(g,s);var u=d.backtrace(s);return typeof s.filter=="function"&&(u=u.filter(s.filter)),Promise.resolve(u)},instrument:function(s,u,p,a){if(typeof s!="function")throw new Error("Cannot instrument non-function object");if(typeof s.__stacktraceOriginalFn=="function")return s;var _=(function(){try{return this.get().then(u,p).catch(p),s.apply(a||this,arguments)}catch(i){throw v(i)&&this.fromError(i).then(u,p).catch(p),i}}).bind(this);return _.__stacktraceOriginalFn=s,_},deinstrument:function(s){if(typeof s!="function")throw new Error("Cannot de-instrument non-function object");return typeof s.__stacktraceOriginalFn=="function"?s.__stacktraceOriginalFn:s},report:function(s,u,p,a){return new Promise(function(_,b){var i=new XMLHttpRequest;if(i.onerror=b,i.onreadystatechange=function(){i.readyState===4&&(i.status>=200&&i.status<400?_(i.responseText):b(new Error("POST to "+u+" failed with status: "+i.status)))},i.open("post",u),i.setRequestHeader("Content-Type","application/json"),a&&typeof a.headers=="object"){var h=a.headers;for(var C in h)Object.prototype.hasOwnProperty.call(h,C)&&i.setRequestHeader(C,h[C])}var x={stack:s};p!=null&&(x.message=p),i.send(JSON.stringify(x))})}}})}(U)),U.exports}var Rn=An();const dt=_t(Rn);class Pn extends j.PureComponent{constructor(){super(...arguments);w(this,"state",{hasError:!1,errorMessage:void 0,stackTrace:void 0,mappedStackTrace:void 0,componentStack:void 0});w(this,"handleCopyStackTrace",()=>{const{errorMessage:e,stackTrace:n,mappedStackTrace:d}=this.state,l=document.createElement("textarea");let g=[e,n];d&&g.push(d),l.textContent=g.join(`


`),l.style.position="fixed",document.body.appendChild(l);try{l.select(),document.execCommand("copy")}catch{}finally{document.body.removeChild(l)}this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),700)})}componentDidCatch(e,n){this.setState({hasError:!0,errorMessage:e.toString(),stackTrace:e.stack,componentStack:n&&n.componentStack,mappedStackTrace:void 0}),dt.fromError(e).then(d=>{this.setState({mappedStackTrace:d.map(l=>l.toString()).join(`
`)})}).catch(()=>{this.setState({mappedStackTrace:void 0})})}render(){const{hasError:e,copied:n,errorMessage:d}=this.state;if(!e)return this.props.children;const l=d&&d.includes("NotFoundError");return r.jsxs("div",{className:"error-boundary",children:[r.jsxs("div",{children:[r.jsx("p",{className:"error-boundary__error",children:l?r.jsx(M,{id:"error.unexpected_crash.explanation_addons",defaultMessage:"This page could not be displayed correctly. This error is likely caused by a browser add-on or automatic translation tools."}):r.jsx(M,{id:"error.unexpected_crash.explanation",defaultMessage:"Due to a bug in our code or a browser compatibility issue, this page could not be displayed correctly."})}),r.jsx("p",{children:l?r.jsx(M,{id:"error.unexpected_crash.next_steps_addons",defaultMessage:"Try disabling them and refreshing the page. If that does not help, you may still be able to use Mastodon through a different browser or native app."}):r.jsx(M,{id:"error.unexpected_crash.next_steps",defaultMessage:"Try refreshing the page. If that does not help, you may still be able to use Mastodon through a different browser or native app."})}),r.jsxs("p",{className:"error-boundary__footer",children:["Mastodon v",cr," · ",r.jsx("a",{href:ur,rel:"noopener",target:"_blank",children:r.jsx(M,{id:"errors.unexpected_crash.report_issue",defaultMessage:"Report issue"})})," · ",r.jsx("button",{onClick:this.handleCopyStackTrace,className:n?"copied":"",children:r.jsx(M,{id:"errors.unexpected_crash.copy_stacktrace",defaultMessage:"Copy stacktrace to clipboard"})})]})]}),r.jsx(Ye,{children:r.jsx("meta",{name:"robots",content:"noindex"})})]})}}const In=({note:t,className:f})=>{const e=tt();return t.length===0||t==="<p></p>"?null:r.jsx("div",{className:`${f} translate`,dangerouslySetInnerHTML:{__html:t},onClickCapture:e})},Fn=({fields:t,limit:f=-1})=>{const e=tt();return t.size===0?null:r.jsx("div",{className:"account-fields",onClickCapture:e,children:t.take(f).map((n,d)=>r.jsxs("dl",{className:ve({verified:n.get("verified_at")}),children:[r.jsx("dt",{dangerouslySetInnerHTML:{__html:n.get("name_emojified")},className:"translate"}),r.jsxs("dd",{className:"translate",title:n.get("value_plain")??"",children:[n.get("verified_at")&&r.jsx(xt,{id:"check",icon:bt,className:"verified__mark"}),r.jsx("span",{dangerouslySetInnerHTML:{__html:n.get("value_emojified")}})]})]},d))})},ht=j.forwardRef(({accountId:t},f)=>{const e=fe(),n=R(p=>t?p.accounts.get(t):void 0),d=n==null?void 0:n.suspended,l=R(p=>t?Er(p,t):void 0),g=!!(d||l),y=R(p=>p.relationships.getIn([t,"note"]));j.useEffect(()=>{t&&!n&&e(Ct(t))},[e,t,n]);const{familiarFollowers:m}=Cr({accountId:t}),v=R(p=>t?p.relationships.get(t):void 0),o=(v==null?void 0:v.followed_by)&&v.following,c=v==null?void 0:v.followed_by,s=!!v,u=m.length>0&&s&&!o&&!c;return r.jsx("div",{ref:f,id:"hover-card",role:"tooltip",className:ve("hover-card dropdown-animation",{"hover-card--loading":!n}),children:n?r.jsxs(r.Fragment,{children:[r.jsxs(ye,{to:`/@${n.acct}`,className:"hover-card__name",children:[r.jsx(ie,{account:g?void 0:n,size:46}),r.jsx(rt,{account:n,localDomain:ce})]}),g?r.jsx("div",{className:"hover-card__limited-account-note",children:d?r.jsx(M,{id:"empty_column.account_suspended",defaultMessage:"Account suspended"}):r.jsx(M,{id:"limited_account_hint.title",defaultMessage:"This profile has been hidden by the moderators of {domain}.",values:{domain:ce}})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"hover-card__text-row",children:[r.jsx(In,{note:n.note_emojified,className:"hover-card__bio"}),r.jsx(Fn,{fields:n.fields,limit:2}),y&&y.length>0&&r.jsxs("dl",{className:"hover-card__note",children:[r.jsx("dt",{className:"hover-card__note-label",children:r.jsx(M,{id:"account.account_note_header",defaultMessage:"Personal note"})}),r.jsx("dd",{children:y})]})]}),r.jsxs("div",{className:"hover-card__numbers",children:[r.jsx(ue,{value:n.followers_count,renderer:Sr}),u&&r.jsxs(r.Fragment,{children:["·",r.jsxs("div",{className:"hover-card__familiar-followers",children:[r.jsx(ue,{value:m.length,renderer:jr}),r.jsx(wr,{compact:!0,children:m.slice(0,3).map(p=>r.jsx(ie,{account:p,size:22},p.id))})]})]}),(o||c)&&r.jsxs(r.Fragment,{children:["·",o?r.jsx(M,{id:"account.mutual",defaultMessage:"You follow each other"}):r.jsx(M,{id:"account.follows_you",defaultMessage:"Follows you"})]})]}),r.jsx(Yr,{accountId:t})]})]}):r.jsx(en,{})})});ht.displayName="HoverCardAccount";const $n=[-12,4],Ue=750,Dn=150,Hn={strategy:"fixed"},Gn=t=>t.matches("[data-hover-card-account]"),Bn=()=>{const[t,f]=j.useState(!1),[e,n]=j.useState(),[d,l]=j.useState(null),g=j.useRef(null),[y,m]=te(),[v,o,c]=te(),[s]=te(),u=_e(),p=j.useCallback(()=>{o(),m(),f(!1),l(null)},[o,m,f,l]);return j.useEffect(()=>{p()},[p,u]),j.useEffect(()=>{let a=!1,_=null,b=null;const i=N=>{N.setAttribute("aria-describedby","hover-card"),f(!0),l(N),n(N.getAttribute("data-hover-card-account")??void 0)},h=()=>{_==null||_.removeAttribute("aria-describedby"),_=null,f(!1),l(null),n(void 0)},C=N=>{const{target:T}=N;if(!(T instanceof HTMLElement)){h();return}!a&&Gn(T)&&(m(),_==null||_.removeAttribute("aria-describedby"),_=T,b=T.getAttribute("title"),T.removeAttribute("title"),v(()=>{i(T)},Ue)),!a&&(T===_||T===g.current)&&m()},x=N=>{const{target:T}=N;_&&(b&&T instanceof HTMLElement&&T===_&&T.setAttribute("title",b),(T===_||T===g.current)&&(o(),y(()=>{h()},Dn)))},E=()=>{a=!1},k=()=>{a=!0,o(),s(E,100)},L=()=>{c(Ue)};return document.body.addEventListener("mouseenter",C,{passive:!0,capture:!0}),document.body.addEventListener("mousemove",L,{passive:!0,capture:!1}),document.body.addEventListener("mouseleave",x,{passive:!0,capture:!0}),document.addEventListener("scroll",k,{passive:!0,capture:!0}),()=>{document.body.removeEventListener("mouseenter",C),document.body.removeEventListener("mousemove",L),document.body.removeEventListener("mouseleave",x),document.removeEventListener("scroll",k)}},[v,y,s,o,m,c,f,n,l]),r.jsx(Ze,{rootClose:!0,onHide:p,show:t,target:d,placement:"bottom-start",flip:!0,offset:$n,popperConfig:Hn,children:({props:a})=>r.jsx("div",{...a,className:"hover-card-controller",children:r.jsx(ht,{accountId:e,ref:g})})})},qn=J({close:{id:"lightbox.close",defaultMessage:"Close"}}),Un=({accountId:t,statusId:f,onClose:e})=>{const n=R(l=>l.accounts.get(t)),d=Ke();return n?r.jsxs("div",{className:"picture-in-picture__header",children:[r.jsxs(ye,{to:`/@${n.get("acct")}/${f}`,className:"picture-in-picture__header__account",children:[r.jsx(ie,{account:n,size:36}),r.jsx(rt,{account:n})]}),r.jsx(wt,{icon:"times",iconComponent:rn,onClick:e,title:d.formatMessage(qn.close)})]}):null},zn=()=>{const t=fe(),f=j.useCallback(()=>{t(St())},[t]),e=R(a=>a.picture_in_picture);if(e.type===null)return null;const{type:n,src:d,currentTime:l,accountId:g,statusId:y,volume:m,muted:v,poster:o,backgroundColor:c,foregroundColor:s,accentColor:u}=e;if(!d)return null;let p;switch(n){case"video":p=r.jsx(Et,{src:d,startTime:l,startVolume:m,startMuted:v,startPlaying:!0,alwaysVisible:!0});break;case"audio":p=r.jsx(jt,{src:d,startTime:l,startVolume:m,startMuted:v,startPlaying:!0,poster:o,backgroundColor:c,foregroundColor:s,accentColor:u})}return r.jsxs("div",{className:"picture-in-picture",children:[r.jsx(Un,{accountId:g,statusId:y,onClose:f}),p,r.jsx(tn,{statusId:y,onClose:f})]})},Wn=({active:t,onClose:f})=>{const e=j.useCallback(l=>{t&&l.key==="Escape"&&(l.preventDefault(),l.stopPropagation(),f())},[t,f]);j.useEffect(()=>(window.addEventListener("keyup",e,!1),()=>{window.removeEventListener("keyup",e)}),[e]);const n=Se({from:{opacity:0},to:{opacity:1},reverse:!t}),d=Se({from:{transform:"scale(0.95)"},to:{transform:"scale(1)"},reverse:!t,config:Tt.wobbly});return r.jsx(je.div,{className:"upload-area",style:{...n,visibility:t?"visible":"hidden"},children:r.jsxs("div",{className:"upload-area__drop",children:[r.jsx(je.div,{className:"upload-area__background",style:d}),r.jsx("div",{className:"upload-area__content",children:r.jsx(M,{id:"upload_area.title",defaultMessage:"Drag & drop to upload"})})]})})},ae=J({browseHashtag:{id:"hashtag.browse",defaultMessage:"Browse posts in #{hashtag}"},browseHashtagFromAccount:{id:"hashtag.browse_from_account",defaultMessage:"Browse posts from @{name} in #{hashtag}"},muteHashtag:{id:"hashtag.mute",defaultMessage:"Mute #{hashtag}"}}),Vn=[5,5],Qn={strategy:"fixed"},Kn=t=>t?t.matches("[data-menu-hashtag]"):!1,Jn=()=>{const t=Ke(),[f,e]=j.useState(!1),[{accountId:n,hashtag:d},l]=j.useState({}),g=j.useRef(null),y=_e(),m=R(c=>n?c.accounts.get(n):void 0);j.useEffect(()=>{e(!1),g.current=null},[e,y]),j.useEffect(()=>{const c=s=>{const u=s.target.closest("a");if(s.button!==0||s.ctrlKey||s.metaKey||!Kn(u))return;const p=u.text.replace(/^#/,""),a=u.getAttribute("data-menu-hashtag");!p||!a||(s.preventDefault(),s.stopPropagation(),g.current=u,e(!0),l({hashtag:p,accountId:a}))};return document.addEventListener("click",c,{capture:!0}),()=>{document.removeEventListener("click",c)}},[l,e]);const v=j.useCallback(()=>{e(!1),g.current=null},[e]),o=j.useMemo(()=>[{text:t.formatMessage(ae.browseHashtag,{hashtag:d}),to:`/tags/${d}`},{text:t.formatMessage(ae.browseHashtagFromAccount,{hashtag:d,name:m==null?void 0:m.username}),to:`/@${m==null?void 0:m.acct}/tagged/${d}`},null,{text:t.formatMessage(ae.muteHashtag,{hashtag:d}),href:"/filters",dangerous:!0}],[t,d,m]);return f?r.jsx(Ze,{show:f,offset:Vn,placement:"bottom",flip:!0,target:g,popperConfig:Qn,children:({props:c,arrowProps:s,placement:u})=>r.jsx("div",{...c,children:r.jsxs("div",{className:`dropdown-animation dropdown-menu ${u}`,children:[r.jsx("div",{className:`dropdown-menu__arrow ${u}`,...s}),r.jsx(Tr,{items:o,onClose:v,openedViaKeyboard:!1})]})})}):null},pt=t=>r.jsxs(un,{children:[r.jsx(sn,{...t}),r.jsx("div",{className:"scrollable"})]}),Zn=()=>{const t=R(f=>f.meta.get("layout"));return{singleColumn:t==="single-column"||t==="mobile",layout:t}},Xn=J({aboutActiveUsers:{id:"server_banner.about_active_users",defaultMessage:"People using this server during the last 30 days (Monthly Active Users)"}}),Yn=t=>({server:t.getIn(["server","server"])});class eo extends j.PureComponent{componentDidMount(){const{dispatch:f}=this.props;f(Xe())}render(){const{server:f,intl:e}=this.props,n=f.get("isLoading");return r.jsxs("div",{className:"server-banner",children:[r.jsx("div",{className:"server-banner__introduction",children:r.jsx(M,{id:"server_banner.is_one_of_many",defaultMessage:"{domain} is one of the many independent Mastodon servers you can use to participate in the fediverse.",values:{domain:r.jsx("strong",{children:ce}),mastodon:r.jsx("a",{href:"https://joinmastodon.org",target:"_blank",rel:"noopener",children:"Mastodon"})}})}),r.jsx(ye,{to:"/about",children:r.jsx(dn,{blurhash:f.getIn(["thumbnail","blurhash"]),src:f.getIn(["thumbnail","url"]),className:"server-banner__hero"})}),r.jsx("div",{className:"server-banner__description",children:n?r.jsxs(r.Fragment,{children:[r.jsx($,{width:"100%"}),r.jsx("br",{}),r.jsx($,{width:"100%"}),r.jsx("br",{}),r.jsx($,{width:"70%"})]}):f.get("description")}),r.jsxs("div",{className:"server-banner__meta",children:[r.jsxs("div",{className:"server-banner__meta__column",children:[r.jsx("h4",{children:r.jsx(M,{id:"server_banner.administered_by",defaultMessage:"Administered by:"})}),r.jsx(ln,{id:f.getIn(["contact","account","id"]),size:36,minimal:!0})]}),r.jsxs("div",{className:"server-banner__meta__column",children:[r.jsx("h4",{children:r.jsx(M,{id:"server_banner.server_stats",defaultMessage:"Server stats:"})}),n?r.jsxs(r.Fragment,{children:[r.jsx("strong",{className:"server-banner__number",children:r.jsx($,{width:"10ch"})}),r.jsx("br",{}),r.jsx("span",{className:"server-banner__number-label",children:r.jsx($,{width:"5ch"})})]}):r.jsxs(r.Fragment,{children:[r.jsx("strong",{className:"server-banner__number",children:r.jsx(ue,{value:f.getIn(["usage","users","active_month"])})}),r.jsx("br",{}),r.jsx("span",{className:"server-banner__number-label",title:e.formatMessage(Xn.aboutActiveUsers),children:r.jsx(M,{id:"server_banner.active_users",defaultMessage:"active users"})})]})]})]})]})}}const to=ge(Yn)(Je(eo)),ro=()=>{const t=fe(),f=j.useCallback(()=>{t(Lt(!0))},[t]),{signedIn:e}=kt(),n=R(l=>{const g=l.compose.get("mounted");return typeof g=="number"?g>1:!1});j.useEffect(()=>(t(Nt()),()=>{t(Mt())}),[t]);const{singleColumn:d}=Zn();return r.jsxs("div",{className:"compose-panel",onFocus:f,children:[r.jsx(hn,{singleColumn:d}),!e&&r.jsxs(r.Fragment,{children:[r.jsx(to,{}),r.jsx("div",{className:"flex-spacer"})]}),e&&!n&&r.jsx(pn,{singleColumn:!0}),e&&n&&r.jsx("div",{className:"compose-form"}),r.jsx(mn,{multiColumn:!d})]})},no=()=>{const t=Ot(),f=R(e=>e.compose.get("should_redirect_to_compose_page"));return j.useLayoutEffect(()=>{f&&t.push("/publish")},[t,f]),null},oo=()=>r.jsx("div",{className:"drawer",children:r.jsx("div",{className:"drawer__pager",children:r.jsx("div",{className:"drawer__inner"})})}),so={COMPOSE:ut,HOME:ct,NOTIFICATIONS:it,PUBLIC:Te,REMOTE:Te,COMMUNITY:Lr,HASHTAG:de,DIRECT:at,FAVOURITES:st,BOOKMARKS:ot,LIST:le,DIRECTORY:nt},ao=()=>{const{setTabsBarElement:t}=an(),f=j.useCallback(e=>{e&&t(e)},[t]);return r.jsx("div",{id:"tabs-bar__portal",ref:f})};class mt extends At{constructor(){super(...arguments);w(this,"mediaQuery","matchMedia"in window&&window.matchMedia("(max-width: 1174px)"));w(this,"state",{renderComposePanel:!(this.mediaQuery&&this.mediaQuery.matches)});w(this,"handleLayoutChange",e=>{this.setState({renderComposePanel:!e.matches})});w(this,"setRef",e=>{this.node=e});w(this,"renderLoading",e=>()=>e==="COMPOSE"?r.jsx(oo,{}):r.jsx(pt,{multiColumn:!0}));w(this,"renderError",e=>r.jsx(K,{multiColumn:!0,errorType:"network",...e}))}componentDidMount(){this.mediaQuery&&(this.mediaQuery.addEventListener?this.mediaQuery.addEventListener("change",this.handleLayoutChange):this.mediaQuery.addListener(this.handleLayoutChange),this.setState({renderComposePanel:!this.mediaQuery.matches})),this.isRtlLayout=document.getElementsByTagName("body")[0].classList.contains("rtl")}componentWillUnmount(){this.mediaQuery&&(this.mediaQuery.removeEventListener?this.mediaQuery.removeEventListener("change",this.handleLayoutChange):this.mediaQuery.removeListener(this.handleLayoutChange))}handleChildrenContentChange(){if(!this.props.singleColumn){const e=this.isRtlLayout?-1:1;on(this.node,(this.node.scrollWidth-window.innerWidth)*e)}}render(){const{columns:e,children:n,singleColumn:d,isModalOpen:l}=this.props,{renderComposePanel:g}=this.state;return d?r.jsxs("div",{className:"columns-area__panels",children:[r.jsx("div",{className:"columns-area__panels__pane columns-area__panels__pane--compositional",children:r.jsxs("div",{className:"columns-area__panels__pane__inner",children:[g&&r.jsx(ro,{}),r.jsx(no,{})]})}),r.jsxs("div",{className:"columns-area__panels__main",children:[r.jsx("div",{className:"tabs-bar__wrapper",children:r.jsx(ao,{})}),r.jsx("div",{className:"columns-area columns-area--mobile",children:n})]}),r.jsx(fn,{})]}):r.jsxs("div",{className:`columns-area ${l?"unscrollable":""}`,ref:this.setRef,children:[e.map(y=>{const m=y.get("params",null)===null?null:y.get("params").toJS(),v=m&&m.other?m.other:{};return r.jsx(et,{fetchComponent:so[y.get("id")],loading:this.renderLoading(y.get("id")),error:this.renderError,children:o=>r.jsx(o,{columnId:y.get("uuid"),params:m,multiColumn:!0,...v})},y.get("uuid"))}),j.Children.map(n,y=>j.cloneElement(y,{multiColumn:!0}))]})}}w(mt,"propTypes",{columns:Rt.list.isRequired,isModalOpen:X.bool.isRequired,singleColumn:X.bool,children:X.node});const io=t=>({columns:t.getIn(["settings","columns"]),isModalOpen:!!t.get("modal").modalType}),co=ge(io,null,null,{forwardRef:!0})(mt),uo=({multiColumn:t,children:f})=>{const e=_e(),n=t&&e.pathname.startsWith("/deck")?{...e,pathname:e.pathname.slice(5)}:e;return r.jsx(xr,{location:n,children:j.Children.map(f,d=>d?j.cloneElement(d,{multiColumn:t}):null)})};class S extends j.Component{constructor(){super(...arguments);w(this,"state",{hasError:!1,stacktrace:""});w(this,"renderComponent",({match:e})=>{const{component:n,content:d,multiColumn:l,componentParams:g}=this.props,{hasError:y,stacktrace:m}=this.state;return y?r.jsx(K,{stacktrace:m,multiColumn:l,errorType:"error"}):r.jsx(et,{fetchComponent:n,loading:this.renderLoading,error:this.renderError,children:v=>r.jsx(v,{params:e.params,multiColumn:l,...g,children:d})})});w(this,"renderLoading",()=>{const{multiColumn:e}=this.props;return r.jsx(pt,{multiColumn:e})});w(this,"renderError",e=>r.jsx(K,{...e,errorType:"network"}))}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){dt.fromError(e).then(n=>{this.setState({stacktrace:e.toString()+`
`+n.map(d=>d.toString()).join(`
`)})}).catch(n=>{console.error(n)})}render(){const{component:e,content:n,...d}=this.props;return r.jsx(xe,{...d,render:this.renderComponent})}}w(S,"defaultProps",{componentParams:{}});const lo=J({beforeUnload:{id:"ui.beforeunload",defaultMessage:"Your draft will be lost if you leave Mastodon."}}),ho=t=>({layout:t.getIn(["meta","layout"]),isComposing:t.getIn(["compose","is_composing"]),hasComposingText:t.getIn(["compose","text"]).trim().length!==0,hasMediaAttachments:t.getIn(["compose","media_attachments"]).size>0,canUploadMore:!t.getIn(["compose","media_attachments"]).some(f=>["audio","video"].includes(f.get("type")))&&t.getIn(["compose","media_attachments"]).size<t.getIn(["server","server","configuration","statuses","max_media_attachments"]),firstLaunch:t.getIn(["settings","introductionVersion"],0)<gr,newAccount:!t.getIn(["accounts",I,"note"])&&!t.getIn(["accounts",I,"bot"])&&t.getIn(["accounts",I,"following_count"],0)===0&&t.getIn(["accounts",I,"statuses_count"],0)===0,username:t.getIn(["accounts",I,"username"])}),po={help:"?",new:"n",search:["s","/"],forceNew:"option+n",toggleComposeSpoilers:"option+x",focusColumn:["1","2","3","4","5","6","7","8","9"],reply:"r",favourite:"f",boost:"b",mention:"m",open:["enter","o"],openProfile:"p",moveDown:["down","j"],moveUp:["up","k"],back:"backspace",goToHome:"g h",goToNotifications:"g n",goToLocal:"g l",goToFederated:"g t",goToDirect:"g d",goToStart:"g s",goToFavourites:"g f",goToPinned:"g p",goToProfile:"g u",goToBlocked:"g b",goToMuted:"g m",goToRequests:"g r",toggleHidden:"x",toggleSensitive:"h",openMedia:"e",onTranslate:"t"};class mo extends j.PureComponent{constructor(){super(...arguments);w(this,"setRef",e=>{e&&(this.node=e)})}UNSAFE_componentWillMount(){document.body.classList.toggle("layout-single-column",this.props.singleColumn),document.body.classList.toggle("layout-multiple-columns",!this.props.singleColumn)}componentDidUpdate(e){[this.props.location.pathname,"/"].includes(e.location.pathname)||this.node.handleChildrenContentChange(),e.singleColumn!==this.props.singleColumn&&(document.body.classList.toggle("layout-single-column",this.props.singleColumn),document.body.classList.toggle("layout-multiple-columns",!this.props.singleColumn))}render(){var m;const{children:e,singleColumn:n,forceOnboarding:d}=this.props,{signedIn:l}=this.props.identity,g=this.props.location.pathname;let y;return l?d?y=r.jsx(A,{from:"/",to:"/start",exact:!0}):n?y=r.jsx(A,{from:"/",to:"/home",exact:!0}):y=r.jsx(A,{from:"/",to:"/deck/getting-started",exact:!0}):dr&&Z&&((m=H)!=null&&m.accounts[Z])?y=r.jsx(A,{from:"/",to:`/@${H.accounts[Z].username}`,exact:!0}):hr&&pr?y=r.jsx(A,{from:"/",to:"/explore",exact:!0}):y=r.jsx(A,{from:"/",to:"/about",exact:!0}),r.jsx(cn,{multiColumn:!n,children:r.jsx(co,{ref:this.setRef,singleColumn:n,children:r.jsxs(uo,{children:[y,n?r.jsx(A,{from:"/deck",to:"/home",exact:!0}):null,n&&g.startsWith("/deck/")?r.jsx(A,{from:g,to:{...this.props.location,pathname:g.slice(5)}}):null,!n&&g==="/home"?r.jsx(A,{from:"/home",to:"/deck/getting-started",exact:!0}):null,g==="/getting-started"?r.jsx(A,{from:"/getting-started",to:n?"/home":"/deck/getting-started",exact:!0}):null,r.jsx(S,{path:"/getting-started",component:kr,content:e}),r.jsx(S,{path:"/keyboard-shortcuts",component:Nr,content:e}),r.jsx(S,{path:"/about",component:Mr,content:e}),r.jsx(S,{path:"/privacy-policy",component:Or,content:e}),r.jsx(S,{path:"/terms-of-service/:date?",component:Ar,content:e}),r.jsx(S,{path:["/home","/timelines/home"],component:ct,content:e}),r.jsx(A,{from:"/timelines/public",to:"/public",exact:!0}),r.jsx(A,{from:"/timelines/public/local",to:"/public/local",exact:!0}),r.jsx(S,{path:"/public",exact:!0,component:Y,componentParams:{feedType:"public"},content:e}),r.jsx(S,{path:"/public/local",exact:!0,component:Y,componentParams:{feedType:"community"},content:e}),r.jsx(S,{path:"/public/remote",exact:!0,component:Y,componentParams:{feedType:"public:remote"},content:e}),r.jsx(S,{path:["/conversations","/timelines/direct"],component:at,content:e}),r.jsx(S,{path:"/tags/:id",component:de,content:e}),r.jsx(S,{path:"/links/:url",component:Rr,content:e}),r.jsx(S,{path:"/lists/new",component:Le,content:e}),r.jsx(S,{path:"/lists/:id/edit",component:Le,content:e}),r.jsx(S,{path:"/lists/:id/members",component:Pr,content:e}),r.jsx(S,{path:"/lists/:id",component:le,content:e}),r.jsx(S,{path:"/notifications",component:it,content:e,exact:!0}),r.jsx(S,{path:"/notifications/requests",component:Ir,content:e,exact:!0}),r.jsx(S,{path:"/notifications/requests/:id",component:Fr,content:e,exact:!0}),r.jsx(S,{path:"/favourites",component:st,content:e}),r.jsx(S,{path:"/bookmarks",component:ot,content:e}),r.jsx(S,{path:"/pinned",component:$r,content:e}),r.jsx(S,{path:["/start","/start/profile"],exact:!0,component:Dr,content:e}),r.jsx(S,{path:"/start/follows",component:Hr,content:e}),r.jsx(S,{path:"/directory",component:nt,content:e}),r.jsx(S,{path:"/explore",component:Gr,content:e}),r.jsx(S,{path:"/search",component:Br,content:e}),r.jsx(S,{path:["/publish","/statuses/new"],component:ut,content:e}),r.jsx(S,{path:["/@:acct","/accounts/:id"],exact:!0,component:ee,content:e}),r.jsx(S,{path:["/@:acct/featured","/accounts/:id/featured"],component:qr,content:e}),r.jsx(S,{path:"/@:acct/tagged/:tagged?",exact:!0,component:ee,content:e}),r.jsx(S,{path:["/@:acct/with_replies","/accounts/:id/with_replies"],component:ee,content:e,componentParams:{withReplies:!0}}),r.jsx(S,{path:["/accounts/:id/followers","/users/:acct/followers","/@:acct/followers"],component:Ur,content:e}),r.jsx(S,{path:["/accounts/:id/following","/users/:acct/following","/@:acct/following"],component:zr,content:e}),r.jsx(S,{path:["/@:acct/media","/accounts/:id/media"],component:Wr,content:e}),r.jsx(S,{path:"/@:acct/:statusId",exact:!0,component:ke,content:e}),r.jsx(S,{path:"/@:acct/:statusId/reblogs",component:Ne,content:e}),r.jsx(S,{path:"/@:acct/:statusId/favourites",component:Me,content:e}),r.jsx(S,{path:"/timelines/tag/:id",component:de,content:e}),r.jsx(S,{path:"/timelines/list/:id",component:le,content:e}),r.jsx(S,{path:"/statuses/:statusId",exact:!0,component:ke,content:e}),r.jsx(S,{path:"/statuses/:statusId/reblogs",component:Ne,content:e}),r.jsx(S,{path:"/statuses/:statusId/favourites",component:Me,content:e}),r.jsx(S,{path:"/follow_requests",component:Vr,content:e}),r.jsx(S,{path:"/blocks",component:Qr,content:e}),r.jsx(S,{path:"/domain_blocks",component:Kr,content:e}),r.jsx(S,{path:"/followed_tags",component:Jr,content:e}),r.jsx(S,{path:"/mutes",component:Zr,content:e}),r.jsx(S,{path:"/lists",component:Xr,content:e}),r.jsx(xe,{component:K})]})})})}}class fo extends j.PureComponent{constructor(){super(...arguments);w(this,"state",{draggingOver:!1});w(this,"handleBeforeUnload",e=>{const{intl:n,dispatch:d,isComposing:l,hasComposingText:g,hasMediaAttachments:y}=this.props;d(It()),l&&(g||y)&&(e.preventDefault(),e.returnValue=n.formatMessage(lo.beforeUnload))});w(this,"handleWindowFocus",()=>{this.props.dispatch(Ft()),this.props.dispatch($t({immediate:!0}))});w(this,"handleWindowBlur",()=>{this.props.dispatch(Dt())});w(this,"handleDragEnter",e=>{e.preventDefault(),this.dragTargets||(this.dragTargets=[]),this.dragTargets.indexOf(e.target)===-1&&this.dragTargets.push(e.target),e.dataTransfer&&Array.from(e.dataTransfer.types).includes("Files")&&this.props.canUploadMore&&this.props.identity.signedIn&&this.setState({draggingOver:!0})});w(this,"handleDragOver",e=>{if(this.dataTransferIsText(e.dataTransfer))return!1;e.preventDefault(),e.stopPropagation();try{e.dataTransfer.dropEffect="copy"}catch{}return!1});w(this,"handleDrop",e=>{this.dataTransferIsText(e.dataTransfer)||(e.preventDefault(),this.setState({draggingOver:!1}),this.dragTargets=[],e.dataTransfer&&e.dataTransfer.files.length>=1&&this.props.canUploadMore&&this.props.identity.signedIn&&this.props.dispatch(Ht(e.dataTransfer.files)))});w(this,"handleDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.dragTargets=this.dragTargets.filter(n=>n!==e.target&&this.node.contains(n)),!(this.dragTargets.length>0)&&this.setState({draggingOver:!1})});w(this,"dataTransferIsText",e=>e&&Array.from(e.types).filter(n=>n==="text/plain").length===1);w(this,"closeUploadModal",()=>{this.setState({draggingOver:!1})});w(this,"handleServiceWorkerPostMessage",({data:e})=>{e.type==="navigate"?this.props.history.push(e.path):console.warn("Unknown message type:",e.type)});w(this,"handleLayoutChange",Gt(()=>{this.props.dispatch(Bt())},500,{trailing:!0}));w(this,"handleResize",()=>{const e=Ut();e!==this.props.layout?(this.handleLayoutChange.cancel(),this.props.dispatch(qt({layout:e}))):this.handleLayoutChange()});w(this,"setRef",e=>{this.node=e});w(this,"handleHotkeyNew",e=>{e.preventDefault();const n=this.node.querySelector(".autosuggest-textarea__textarea");n&&n.focus()});w(this,"handleHotkeySearch",e=>{e.preventDefault();const n=this.node.querySelector(".search__input");n&&n.focus()});w(this,"handleHotkeyForceNew",e=>{this.handleHotkeyNew(e),this.props.dispatch(Kt())});w(this,"handleHotkeyToggleComposeSpoilers",e=>{e.preventDefault(),this.props.dispatch(Jt())});w(this,"handleHotkeyFocusColumn",e=>{const n=e.key*1+1,d=this.node.querySelector(`.column:nth-child(${n})`);if(!d)return;const l=d.querySelector(".scrollable");if(l){const g=l.querySelector(".focusable");g&&(l.scrollTop>g.offsetTop&&g.scrollIntoView(!0),g.focus())}});w(this,"handleHotkeyBack",e=>{var d,l;e.preventDefault();const{history:n}=this.props;(l=(d=n.location)==null?void 0:d.state)!=null&&l.fromMastodon?n.goBack():n.push("/")});w(this,"setHotkeysRef",e=>{this.hotkeys=e});w(this,"handleHotkeyToggleHelp",()=>{this.props.location.pathname==="/keyboard-shortcuts"?this.props.history.goBack():this.props.history.push("/keyboard-shortcuts")});w(this,"handleHotkeyGoToHome",()=>{this.props.history.push("/home")});w(this,"handleHotkeyGoToNotifications",()=>{this.props.history.push("/notifications")});w(this,"handleHotkeyGoToLocal",()=>{this.props.history.push("/public/local")});w(this,"handleHotkeyGoToFederated",()=>{this.props.history.push("/public")});w(this,"handleHotkeyGoToDirect",()=>{this.props.history.push("/conversations")});w(this,"handleHotkeyGoToStart",()=>{this.props.history.push("/getting-started")});w(this,"handleHotkeyGoToFavourites",()=>{this.props.history.push("/favourites")});w(this,"handleHotkeyGoToPinned",()=>{this.props.history.push("/pinned")});w(this,"handleHotkeyGoToProfile",()=>{this.props.history.push(`/@${this.props.username}`)});w(this,"handleHotkeyGoToBlocked",()=>{this.props.history.push("/blocks")});w(this,"handleHotkeyGoToMuted",()=>{this.props.history.push("/mutes")});w(this,"handleHotkeyGoToRequests",()=>{this.props.history.push("/follow_requests")})}componentDidMount(){const{signedIn:e}=this.props.identity;window.addEventListener("focus",this.handleWindowFocus,!1),window.addEventListener("blur",this.handleWindowBlur,!1),window.addEventListener("beforeunload",this.handleBeforeUnload,!1),window.addEventListener("resize",this.handleResize,{passive:!0}),document.addEventListener("dragenter",this.handleDragEnter,!1),document.addEventListener("dragover",this.handleDragOver,!1),document.addEventListener("drop",this.handleDrop,!1),document.addEventListener("dragleave",this.handleDragLeave,!1),document.addEventListener("dragend",this.handleDragEnd,!1),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",this.handleServiceWorkerPostMessage),e&&(this.props.dispatch(zt()),this.props.dispatch(Wt()),this.props.dispatch(Vt()),this.props.dispatch(Qt()),setTimeout(()=>this.props.dispatch(Xe()),3e3)),this.hotkeys.__mousetrap__.stopCallback=(n,d)=>["TEXTAREA","SELECT","INPUT"].includes(d.tagName)}componentWillUnmount(){window.removeEventListener("focus",this.handleWindowFocus),window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("beforeunload",this.handleBeforeUnload),window.removeEventListener("resize",this.handleResize),document.removeEventListener("dragenter",this.handleDragEnter),document.removeEventListener("dragover",this.handleDragOver),document.removeEventListener("drop",this.handleDrop),document.removeEventListener("dragleave",this.handleDragLeave),document.removeEventListener("dragend",this.handleDragEnd)}render(){const{draggingOver:e}=this.state,{children:n,isComposing:d,location:l,layout:g,firstLaunch:y,newAccount:m}=this.props,v={help:this.handleHotkeyToggleHelp,new:this.handleHotkeyNew,search:this.handleHotkeySearch,forceNew:this.handleHotkeyForceNew,toggleComposeSpoilers:this.handleHotkeyToggleComposeSpoilers,focusColumn:this.handleHotkeyFocusColumn,back:this.handleHotkeyBack,goToHome:this.handleHotkeyGoToHome,goToNotifications:this.handleHotkeyGoToNotifications,goToLocal:this.handleHotkeyGoToLocal,goToFederated:this.handleHotkeyGoToFederated,goToDirect:this.handleHotkeyGoToDirect,goToStart:this.handleHotkeyGoToStart,goToFavourites:this.handleHotkeyGoToFavourites,goToPinned:this.handleHotkeyGoToPinned,goToProfile:this.handleHotkeyGoToProfile,goToBlocked:this.handleHotkeyGoToBlocked,goToMuted:this.handleHotkeyGoToMuted,goToRequests:this.handleHotkeyGoToRequests};return r.jsx(fr.HotKeys,{keyMap:po,handlers:v,ref:this.setHotkeysRef,attach:window,focused:!0,children:r.jsxs("div",{className:ve("ui",{"is-composing":d}),ref:this.setRef,children:[r.jsx(mo,{identity:this.props.identity,location:l,singleColumn:g==="mobile"||g==="single-column",forceOnboarding:y&&m,children:n}),r.jsx(nn,{}),g!=="mobile"&&r.jsx(zn,{}),r.jsx(vr,{}),!lr&&r.jsx(Bn,{}),r.jsx(Jn,{}),r.jsx(yr,{className:"loading-bar"}),r.jsx(_r,{}),r.jsx(Wn,{active:e,onClose:this.closeUploadModal})]})})}}const go=ge(ho)(Je(br(Pt(fo)))),vo=Zt([t=>t.navigation.open,t=>t.modal.get("stack").size>0],(t,f)=>t||f),yo=()=>{const t=R(vo);return j.useLayoutEffect(()=>{document.documentElement.classList.toggle("has-modal",t)},[t]),null},ze=Qe()?Ee:`${Ee} (Dev)`,_o=Xt(H);F.dispatch(_o);H.meta.me&&F.dispatch(Yt());class xo extends j.PureComponent{constructor(){super(...arguments);w(this,"identity",er(H))}componentDidMount(){this.identity.signedIn&&(this.disconnect=F.dispatch(ir()))}componentWillUnmount(){this.disconnect&&(this.disconnect(),this.disconnect=null)}shouldUpdateScroll(e,{location:n}){var d,l,g,y;return!((d=n.state)!=null&&d.mastodonModalKey&&((l=n.state)==null?void 0:l.mastodonModalKey)!==((y=(g=e==null?void 0:e.location)==null?void 0:g.state)==null?void 0:y.mastodonModalKey))}render(){return r.jsx(tr.Provider,{value:this.identity,children:r.jsx(gn,{children:r.jsx(rr,{store:F,children:r.jsxs(Pn,{children:[r.jsxs(nr,{children:[r.jsx(ar,{shouldUpdateScroll:this.shouldUpdateScroll,children:r.jsx(xe,{path:"/",component:go})}),r.jsx(yo,{})]}),r.jsx(Ye,{defaultTitle:ze,titleTemplate:`%s - ${ze}`})]})})})})}}var O=typeof performance<"u"&&performance,We=O&&O.now?function(){return O.now()}:function(){return Date.now()};function q(t){if(!t)throw new Error("name must be non-empty")}function bo(t,f){for(var e=0,n=t.length,d;e<n;)d=e+n>>>1,t[d].startTime<f.startTime?e=d+1:n=d;t.splice(e,0,f)}var he,pe;if(O&&O.mark&&O.measure&&O.getEntriesByName&&O.getEntriesByType&&O.clearMarks&&O.clearMeasures)he=function(t){q(t),O.mark("start "+t)},pe=function(t){q(t),O.mark("end "+t);var f=O.measure(t,"start "+t,"end "+t);if(f)return f;var e=O.getEntriesByName(t);return e[e.length-1]};else{var Ve={},Co=[];he=function(t){q(t);var f=We();Ve["$"+t]=f},pe=function(t){q(t);var f=We(),e=Ve["$"+t];if(!e)throw new Error("no known mark: "+t);var n={startTime:e,name:t,duration:f-e,entryType:"measure"};return bo(Co,n),n}}function wo(t){me()&&he(t)}function So(t){me()&&pe(t)}function jo(){return wo("main()"),vn(async()=>{const t=document.getElementById("mastodon");if(!t)throw new Error("Mount node not found");const f=JSON.parse(t.getAttribute("data-props")??"{}");if(mr&&or.assign({skipAnimation:!0}),yt.createRoot(t).render(r.jsx(xo,{...f})),F.dispatch(sr()),Qe()&&I&&"serviceWorker"in navigator){const{Workbox:n}=await we(async()=>{const{Workbox:g}=await import("../workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:g}},[]),d=new n(me()?"/packs-dev/dev-sw.js?dev-sw":"/sw.js",{type:"module",scope:"/"});let l;try{l=await d.register()}catch(g){console.error(g)}if(l&&"Notification"in window&&Notification.permission==="granted"){const g=await we(()=>import("../push_notifications-index-D1mgptUM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]));F.dispatch(g.register())}}So("main()")})}yn().then(vt).then(jo).catch(t=>{console.error(t)});
//# sourceMappingURL=application-5C8jTGvB.js.map
